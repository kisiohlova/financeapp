<h4>All spendings for the Category "<%= raw @cat_name %>" for the period: <%= params[:start_date] %> - <%= params[:end_date] %> </h4>

<canvas id="myChart" width="600" height="400"></canvas>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<script>
  document.addEventListener("DOMContentLoaded", function() {
    const presetColors = ["#DAF7A6", "#FFC300", "#FF5733", "#C70039", "#900C3F", "#581845"];

    function shuffleArray(array) {
      for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
      }
      return array;
    }

    const data = {
      labels: <%= @cat_dates.to_json.html_safe %>,
      datasets: [{
        label: 'Spent this day',
        data: <%= @cat_date_amount.to_json.html_safe %>,
        backgroundColor: shuffleArray(presetColors).slice(0, <%= @cat_date_amount.length %>)
      }]
    };

    const config = {
      type: 'bar',
      data: data,
      options: {
        responsive: false
      }
    };

    const chart = new Chart(document.getElementById('myChart'), config);
  });
</script>